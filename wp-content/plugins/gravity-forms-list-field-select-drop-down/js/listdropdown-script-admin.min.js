var text_drop_down_columns=itsg_listdropdown_admin_js_settings.text_drop_down_columns,text_drop_down_columns_instructions=itsg_listdropdown_admin_js_settings.text_drop_down_columns_instructions,text_make_drop_down=itsg_listdropdown_admin_js_settings.text_make_drop_down,text_drop_down_options=itsg_listdropdown_admin_js_settings.text_drop_down_options,text_enable_enhanced=itsg_listdropdown_admin_js_settings.text_enable_enhanced,text_enable_add_options=itsg_listdropdown_admin_js_settings.text_enable_add_options;function SetFieldChoicesList(e,i){var o="",_=new Array({value:"First Choice",text:"First Choice"},{value:"Second Choice",text:"Second Choice"},{value:"Third Choice",text:"Third Choice"});if("multi"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")){var t=void 0===(e=field.choices[i]).isDropDownChoices?_:e.isDropDownChoices,d=!(void 0===e.isDropDownEnableChoiceValue||!e.isDropDownEnableChoiceValue);if(t.length||(t=_,field.choices[i].isDropDownChoices=_),"string"==typeof t){t=itsg_gf_list_drop_down_maybe_string_to_array(t);field.choices[i].isDropDownChoices=t}}else{t=void 0===field.itsg_list_field_drop_down_options?_:field.itsg_list_field_drop_down_options,d=!(void 0===field.isDropDownEnableChoiceValue||!field.isDropDownEnableChoiceValue);if(void 0===field.itsg_list_field_drop_down_options&&(t=_,field.itsg_list_field_drop_down_options=_),"string"==typeof t){t=itsg_gf_list_drop_down_maybe_string_to_array(t);field.itsg_list_field_drop_down_options=t}}console.log(t);for(var s=0;s<t.length;s++){var n=d?String(t[s].value):String(t[s].text),l="list_choice_drop_down";o+="<li class='field-choice-row-drop-down' data-input_type='"+l+"' data-index='"+s+"'>",o+="<input type='text' id='"+l+"_choice_text_"+s+"' value=\""+String(t[s].text).replace(/"/g,"&quot;")+"\" class='field-choice-input-dropdown field-choice-text' onblur=\"SetFieldChoiceDropDown( "+i+' );" />',o+="<input type='text' id='"+l+"_choice_value_"+s+"' value=\""+n.replace(/"/g,"&quot;")+"\" class='field-choice-input-dropdown field-choice-value' onblur=\"SetFieldChoiceDropDown( "+i+' );" />',o+="<a class='gf_insert_field_choice' onclick=\"InsertFieldChoiceisDropDown( "+i+","+s+');" onkeypress="InsertFieldChoiceisDropDown( '+i+","+s+");\"><i class='gficon-add'></i></a>",t.length>1&&(o+="<a class='gf_delete_field_choice' onclick=\"DeleteFieldChoiceisDropDown( "+i+","+s+');" onkeypress="DeleteFieldChoiceisDropDown( '+i+","+s+");\"><i class='gficon-subtract'></i></a>"),o+="</li>"}"single"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")&&(i="single"),jQuery(".choices_setting_"+i+" #field_choices_"+i).html(o),1==t.length?jQuery("#field_choices_"+i+" .gf_delete_field_choice").hide():jQuery("#field_choices_"+i+" .gf_delete_field_choice").show()}function itsg_gf_list_drop_down_maybe_string_to_array(e){if("string"==typeof e){e=(e=e.replace("\\,","ITSG_TEMP_DELIM")).split(",");for(var i=[],o=0;o<e.length;o++){var _=e[o].replace("ITSG_TEMP_DELIM",",");i.push({value:_,text:_})}e=i}return e}function InsertFieldChoiceisDropDown(e,i){var o={value:"",text:""};if("multi"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")){var _=field.choices[e];itsg_gf_list_drop_down_maybe_string_to_array(void 0===_.isDropDownChoices?o:_.isDropDownChoices).splice(i+1,0,o),SetFieldChoicesList(field.choices[e],e)}else{itsg_gf_list_drop_down_maybe_string_to_array(void 0===field.itsg_list_field_drop_down_options?o:field.itsg_list_field_drop_down_options).splice(i+1,0,o),SetFieldChoicesList(field,e)}}function DeleteFieldChoiceisDropDown(e,i){if("multi"==(void 0!==field.enableColumns&&field.enableColumns?"multi":"single")){var o=field.choices[e];itsg_gf_list_drop_down_maybe_string_to_array(void 0===o.isDropDownChoices?"":o.isDropDownChoices).splice(i,1),SetFieldChoicesList(field.choices[e],e)}else{itsg_gf_list_drop_down_maybe_string_to_array(void 0===field.itsg_list_field_drop_down_options?"":field.itsg_list_field_drop_down_options).splice(i,1),SetFieldChoicesList(field,e)}}function SetFieldChoiceDropDown(e){var i=void 0!==field.enableColumns&&field.enableColumns?"multi":"single";"single"==i&&(e="single");var o=jQuery("#list_choice_dropdown_enable_"+e).is(":checked"),_=jQuery("#list_choice_dropdown_enhanced_"+e).is(":checked"),t=jQuery("#list_choice_dropdown_enhanced_other_"+e).is(":checked"),d=jQuery("#list_choice_values_enabled_"+e).is(":checked");field=GetSelectedField();var s=[];if(jQuery(".choices_setting_"+e+" li.field-choice-row-drop-down").each(function(){var e=jQuery(this).find("input.field-choice-text").val(),i=jQuery(this).find("input.field-choice-value").val();s.push({value:i,text:e})}),"multi"==i){var n=field.choices[e];n.isDropDown=o,n.isDropDownChoices=s,n.isDropDownEnhanced=_,n.isDropDownEnhancedOther=t,n.isDropDownEnableChoiceValue=d}else field.itsg_list_field_drop_down=o,field.itsg_list_field_drop_down_options=s,field.itsg_list_field_drop_down_enhanced=_,field.list_choice_drop_down_enhanced_other=t,field.isDropDownEnableChoiceValue=d;LoadBulkChoices(field),UpdateFieldChoices(GetInputType(field)),itsg_gf_list_drop_down_preview(field),itsg_gf_list_drop_down_displayed_options(e)}function itsg_gf_list_drop_down_preview(e){setTimeout(function(){if(e.enableColumns)for(var i=0;i<e.choices.length;i++){if(jQuery("#list_choice_dropdown_enable_"+i).is(":checked")){var o=jQuery('<select style="width:100%" disabled="">'),_=i+1;jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr td:nth-child("+_+")").html(o)}}else{if(e.itsg_list_field_drop_down)o=jQuery('<td><select style="width:100%" disabled=""></td>');else o=jQuery('<td><input type="text" style="width:100%" disabled=""></td>');jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr select").remove(),jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr input").remove(),jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr").prepend(o)}},50)}function itsg_gf_list_drop_down_displayed_options(e){jQuery("#list_choice_dropdown_enable_"+e).is(":checked");var i=jQuery("#list_choice_dropdown_enhanced_"+e).is(":checked"),o=jQuery("#list_choice_values_enabled_"+e).is(":checked"),_=jQuery('label[for="list_choice_dropdown_enhanced_other_'+e+'"]'),t=jQuery("#list_choice_dropdown_enhanced_other_"+e);i?(_.show(),_.addClass("inline"),t.show()):(_.hide(),_.removeClass("inline"),t.hide()),o?jQuery(".choices_setting_"+e).addClass("choice_with_value"):jQuery(".choices_setting_"+e).removeClass("choice_with_value")}function itsg_gf_list_drop_down_init(){setTimeout(function(){if(itsg_gf_list_drop_down_preview(field),"list"==GetInputType(field))if(field.enableColumns){jQuery(".list_drop_down_settings").hide();for(var e=0;e<field.choices.length;e++){if(o=field.choices[e].isDropDown){if(!jQuery("#list_choice_dropdown_options .choices_setting_"+e).length){var i=jQuery(".choices_setting").first().prop("outerHTML").replace(/"choices_setting/g,'"choices_setting_'+e).replace(/"field_choices"/g,"'field_choices_"+e+"' data-index='"+e+"'").replace("gfield_settings_choices_container","gfield_settings_choices_container_"+e).replace("ToggleChoiceValue();","").replace("SetFieldChoices();","").replace("SetFieldProperty('enableChoiceValue', this.checked)","SetFieldChoiceDropDown("+e+")").replace(/"field_choice_values_enabled"/g,"list_choice_values_enabled_"+e);jQuery(".list_choice_dropdown_options_"+e).prepend(i),jQuery(".choices_setting_"+e+" a.gf_tooltip").remove(),jQuery(".choices_setting_"+e).find("#gfield_bulk_add").prev("input[type=button]").remove(),jQuery(".choices_setting_"+e).find("#gfield_bulk_add").remove(),SetFieldChoicesList(field.choices[e],e),jQuery(".choices_setting_"+e).show()}jQuery(".list_choice_dropdown_options_"+e).show();var o=void 0!==field.choices[e].isDropDown&&field.choices[e].isDropDown,_=void 0!==field.choices[e].isDropDownChoices?field.choices[e].isDropDownChoices:"",t=void 0!==field.choices[e].isDropDownEnhanced&&field.choices[e].isDropDownEnhanced,d=void 0!==field.choices[e].isDropDownEnhancedOther&&field.choices[e].isDropDownEnhancedOther,s=void 0!==field.choices[e].isDropDownEnableChoiceValue&&field.choices[e].isDropDownEnableChoiceValue;jQuery("#field_columns #list_choice_dropdown_enable_"+e).prop("checked",o),jQuery("#field_columns #list_choice_dropdown_options_"+e).val(_),jQuery("#field_columns #list_choice_dropdown_enhanced_"+e).prop("checked",t),jQuery("#field_columns #list_choice_dropdown_enhanced_other_"+e).prop("checked",d),jQuery("#field_columns #list_choice_values_enabled_"+e).prop("checked",s),itsg_gf_list_drop_down_displayed_options(e)}else jQuery(".list_choice_dropdown_options_"+e).hide()}}else{jQuery(".list_drop_down_settings").show();e=0,o=void 0!==field.itsg_list_field_drop_down&&field.itsg_list_field_drop_down,_=void 0!==field.itsg_list_field_drop_down_options?field.itsg_list_field_drop_down_options:"",t=void 0!==field.itsg_list_field_drop_down_enhanced&&field.itsg_list_field_drop_down_enhanced,d=void 0!==field.list_choice_drop_down_enhanced_other&&field.list_choice_drop_down_enhanced_other,s=void 0!==field.isDropDownEnableChoiceValue&&field.isDropDownEnableChoiceValue;if(jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_enable_single").prop("checked",o),jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_options_single").val(_),jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_enhanced_single").prop("checked",t),jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_enhanced_other_single").prop("checked",d),jQuery("#field_settings .list_drop_down_settings #list_choice_values_enabled_single").prop("checked",s),o){if(!jQuery("#list_choice_dropdown_options .choices_setting_"+e).length){i=jQuery(".choices_setting").first().prop("outerHTML").replace(/"choices_setting/g,'"choices_setting_'+e).replace(/"field_choices"/g,"'field_choices_"+e+"' data-index='"+e+"'").replace("gfield_settings_choices_container","gfield_settings_choices_container_"+e).replace("ToggleChoiceValue();","").replace("SetFieldChoices();","").replace("SetFieldProperty('enableChoiceValue', this.checked)","SetFieldChoiceDropDown("+e+")").replace(/"field_choice_values_enabled"/g,"list_choice_values_enabled_"+e);jQuery(".list_choice_dropdown_options_"+e).prepend(i),jQuery(".choices_setting_"+e+" a.gf_tooltip").remove(),jQuery(".choices_setting_"+e).find("#gfield_bulk_add").prev("input[type=button]").remove(),jQuery(".choices_setting_"+e).find("#gfield_bulk_add").remove(),SetFieldChoicesList(field,e),jQuery(".choices_setting_"+e).show()}jQuery("#list_drop_down_options").show(),itsg_gf_list_drop_down_displayed_options("single")}else jQuery("#list_drop_down_options").hide()}},50)}!function(e){var i=e.GetFieldChoices;e.GetFieldChoices=function(){if(str=i.apply(this,[field]),null==field.choices)return"";for(var e=0;e<field.choices.length;e++){var o=GetInputType(field),_=field.choices[e].isDropDown?"checked":"",t=field.choices[e].isDropDownEnhanced?"checked":"",d=field.choices[e].isDropDownEnhancedOther?"checked":"",s=field.enableChoiceValue?String(field.choices[e].value):field.choices[e].text;"list"==o&&(0==e&&(str+="<p><strong>"+text_drop_down_columns+"</strong><br>"+text_drop_down_columns_instructions+"</p>"),str+="<div id ='list_choice_dropdown_options' >",str+="<input type='checkbox' name='choice_dropdown_enable' id='list_choice_dropdown_enable_"+e+"' "+_+' onclick="SetFieldChoiceDropDown( '+e+' );itsg_gf_list_drop_down_init();" /> ',str+="<label class='inline' for='list_choice_dropdown_enable_"+e+"'>"+s+" - "+text_make_drop_down+"</label>",str+="<div style='display:none; background: rgb(244, 244, 244) none repeat scroll 0px 0px; padding: 10px; border-bottom: 1px solid grey; margin: 10px 0;' class='list_choice_dropdown_options_"+e+"'>",str+="<br>",str+="<input type='checkbox' name='choice_dropdown_enhanced' id='list_choice_dropdown_enhanced_"+e+"' "+t+' onclick="SetFieldChoiceDropDown( '+e+' );itsg_gf_list_drop_down_init();"  >',str+="<label class='inline' for='list_choice_dropdown_enhanced_"+e+"'>",str+=text_enable_enhanced+"</label>",str+="<br>",str+="<input type='checkbox' name='choice_dropdown_enhanced_other' id='list_choice_dropdown_enhanced_other_"+e+"' "+d+' onclick="SetFieldChoiceDropDown( '+e+' );"  >',str+="<label class='inline' for='list_choice_dropdown_enhanced_other_"+e+"'>",str+=text_enable_add_options+"</label>",str+="</div>",str+="</div>")}return itsg_gf_list_drop_down_init(),str}}(window||{}),jQuery(document).on("change","#gfield_settings_columns_container #field_columns li",function(){itsg_gf_list_drop_down_init()}),jQuery(document).on("change","#field_settings input[id=field_columns_enabled]",function(){itsg_gf_list_drop_down_init()}),jQuery(document).bind("gform_load_field_settings",function(e,i,o){itsg_gf_list_drop_down_init()});